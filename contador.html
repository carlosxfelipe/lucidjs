<!DOCTYPE html>
<html lang="pt-BR">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Contador Interativo com Lucid.js</title>
    <style>
      body { font-family: system-ui, sans-serif; margin: 0; padding: 16px; }
      .container { max-width: 600px; margin: 0 auto; }
      h1, h2 { text-align: center; }
      button { margin: 4px; padding: 8px 12px; cursor: pointer; }
      .tags { display: flex; gap: 4px; flex-wrap: wrap; margin-top: 8px; }
      .tag { padding: 2px 6px; border: 1px solid #ccc; border-radius: 4px; }
      .muted { color: #666; text-align: center; }
    </style>
  </head>

  <body>
    <main class="container">
      <h1>Contador Interativo</h1>
      <div id="app"></div>
    </main>

    <!-- Usando ESM -->
    <script type="module">
      import { h, mount, createSignal, createMemo, Show, For, batch } from './lucid-js.js';

      const App = () => {
        const [count, setCount] = createSignal(0);
        const doubled = createMemo(() => count() * 2);
        const plusTwo = () => batch(() => { setCount(c => c + 1); setCount(c => c + 1); });

        return h(
          "article",
          null,
          h("header", null, h("h2", null, "Contador")),
          h("p", null, "Valor: ", count, " • Dobro: ", doubled),
          h(
            "div",
            null,
            h("button", { onClick: () => setCount(c => Math.max(0, c - 1)) }, "−1"),
            h("button", { onClick: () => setCount(c => c + 1) }, "+1"),
            h("button", { onClick: plusTwo }, "+2 (batch)"),
            h("button", { onClick: () => setCount(0) }, "reset"),
          ),
          Show({
            when: () => count() > 0,
            children: h("p", { class: "muted" }, "Listando itens de 0 até ", count),
          }),
          h(
            "div",
            { class: "tags" },
            For({
              each: () => Array.from({ length: count() }, (_, i) => i),
              children: (i) => h("span", { class: "tag" }, String(i)),
            }),
          ),
        );
      };

      mount(h(App), document.querySelector("#app"));
    </script>
  </body>
</html>
